<!DOCTYPE html>
<html>
    <head>
        <!-- Standard Meta -->
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

        <!-- Site Properties -->
        <title>Home</title>

        <link rel="stylesheet" type="text/css" href="./lib/Semantic-UI-CSS-master/semantic.min.css">
        <link rel="stylesheet" type="text/css" href="./css/custom.css">
        <script src="./lib/jquery-3.3.1.min.js"></script>
        <script src="./js/cookie.js"></script>

    </head>

    <body>
        <div class="ui pointing menu">
            <p class="item" id="solde"></p>
            <div class="right menu">
                <p class="item" id="name"></p>
            </div>
        </div>
        <div class="ui segment">
            <div class="ui five column grid" id="gridContainer">

                <div class="column">   
                    <div class="ui special cards">
                        <div class="card">
                            <div class="content">
                                <p>Buy</p>
                            </div>
                            <a href="/buy.html">
                            <div class="ui bottom attached button">
                                See
                            </div>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="column">   
                    <div class="ui special cards">
                        <div class="card">
                            <div class="content">
                                <p>Sell</p>
                            </div>
                            <a href="/sell.html">
                            <div class="ui bottom attached button">
                                See
                            </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    

        <script src="./lib/Semantic-UI-CSS-master/semantic.js"></script>
        <script src="./js/animation-custom.js"></script> 
        <script>
            $(document).ready(function () {
                var token = getCookie("token");
                var user = null;
                if (token) {
                    $.ajax({
                        type: "GET",
                        url: "/users/" + token,
                        data: null,
                        dataType: "json",
                        contentType: 'application/json'
                    }).done(function (data) {
                        
                        if (!data) {
                            $(location).attr('href', '/login.html');
                        }
                        user = data;
                        if (user.id == null) {
                            $(location).attr('href', '/login.html');
                        }

                        $('#name').text(user.name);
                        $('#solde').text(user.solde + ' $');
                    });
                } else {
                    $(location).attr('href', '/login.html');
                }
            });
        </script>

    </body>
</html>